<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>📋 متجر PIZZA HOT</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box }
    body {
      margin: 0;
      font-family: 'Tajawal', sans-serif;
      background: #f4f1ee;
      color: #2c2c2c;
      line-height: 1.6;
    }
    header {
      position: fixed;
      top: 0;
      width: 100%;
      background: #1a1a1a;
      color: #f2c785;
      text-align: center;
      padding: 12px;
      z-index: 10;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    header a {
      margin: 0 10px;
      color: inherit;
      text-decoration: none;
      font-weight: 700;
      font-size: 1.1rem;
    }
    .overlay {
      padding: 90px 10px 160px;
      background: #fff;
      min-height: 100vh;
    }
    h1 {
      text-align: center;
      color: #b22222;
      margin: 20px 0;
      font-size: clamp(1.8rem, 5vw, 2.5rem);
      font-weight: 900;
    }
    .section {
      max-width: 900px;
      margin: 30px auto;
      padding: 0 10px;
    }
    h2 {
      text-align: center;
      color: #8b4513;
      margin-bottom: 12px;
      font-size: 1.4rem;
    }
    .table-wrapper {
      overflow-x: auto;
      border: 1px solid #ccc;
      border-radius: 6px;
      background: #fff;
      margin-bottom: 20px;
      box-shadow: 0 0 8px rgba(0,0,0,0.05);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 1rem;
    }
    th, td {
      text-align: center;
      border: 1px solid #ddd;
      padding: 10px;
    }
    th {
      background: #b22222;
      color: #fff;
    }
    tr:nth-child(even) td {
      background: #fdf5e6;
    }
    select.size, input.qty {
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 4px;
      text-align: center;
      font-size: 0.95rem;
    }
    input.qty {
      width: 60px;
    }
    button.add-btn {
      background: #f2c785;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      font-weight: 700;
      cursor: pointer;
      color: #1a1a1a;
    }
    button.add-btn:hover {
      background: #e0b96a;
    }
    .footer {
      text-align: center;
      color: #666;
      padding: 20px;
      margin-top: 40px;
      border-top: 1px dashed #ccc;
      background: #f9f9f9;
    }
    .cart-tab ul {
      padding: 0;
      list-style: none;
      margin: 10px 0;
    }
    .cart-tab li {
      margin-bottom: 6px;
      font-size: 0.95rem;
    }
    .cart-tab .btn {
      display: inline-block;
      margin: 6px 4px;
      padding: 6px 10px;
      background: #25d366;
      color: #fff;
      border-radius: 6px;
      text-decoration: none;
    }
    .cart-tab .btn.card {
      background: #007bff;
    }
    .cart-tab .remove-item {
      background: none;
      border: none;
      color: #b22222;
      cursor: pointer;
      font-size: 1rem;
    }
    .cart-tab strong {
      display: block;
      margin-bottom: 6px;
    }
    .active {
      background: #f2c785;
      color: #000 !important;
    }
  </style>
</head>
<body>

<header>
  <a href="index.html">🏠 الرئيسية</a>
  <a href="promo_offer.html">🔥 العرض</a>
  <a href="store.html">🛒 المتجر</a>
</header>

<div class="overlay">
  <h1>📋 متجر PIZZA HOT</h1>
  <!-- 🍕 قائمة البيتزا -->
  <div class="section">
    <h2>🍕 قائمة البيتزا</h2>
    <div class="table-wrapper">
      <table id="pizza-menu">
        <thead><tr><th>النوع</th><th>الحجم</th><th>السعر</th><th>كمية</th><th>أضف</th></tr></thead>
        <tbody>
          <tr data-item="بيتزا دجاج">
            <td>بيتزا دجاج</td>
            <td>
              <select class="size">
                <option value="65">XL – 65₪</option>
                <option value="45">L – 45₪</option>
                <option value="33">M – 33₪</option>
                <option value="17">S – 17₪</option>
              </select>
            </td>
            <td><span class="price">65₪</span></td>
            <td><input class="qty" type="number" min="1" value="1"></td>
            <td><button class="add-btn">أضف</button></td>
          </tr>
          <tr data-item="بيتزا خضار">
            <td>بيتزا خضار</td>
            <td>
              <select class="size">
                <option value="50">XL – 50₪</option>
                <option value="38">L – 38₪</option>
                <option value="20">M – 20₪</option>
                <option value="14">S – 14₪</option>
              </select>
            </td>
            <td><span class="price">50₪</span></td>
            <td><input class="qty" type="number" min="1" value="1"></td>
            <td><button class="add-btn">أضف</button></td>
          </tr>
          <tr data-item="بيتزا سلامي">
            <td>بيتزا سلامي</td>
            <td>
              <select class="size">
                <option value="55">XL – 55₪</option>
                <option value="40">L – 40₪</option>
                <option value="23">M – 23₪</option>
                <option value="15">S – 15₪</option>
              </select>
            </td>
            <td><span class="price">55₪</span></td>
            <td><input class="qty" type="number" min="1" value="1"></td>
            <td><button class="add-btn">أضف</button></td>
          </tr>
          <tr data-item="بيتزا نقانق">
            <td>بيتزا نقانق</td>
            <td>
              <select class="size">
                <option value="55">XL – 55₪</option>
                <option value="40">L – 40₪</option>
                <option value="23">M – 23₪</option>
                <option value="15">S – 15₪</option>
              </select>
            </td>
            <td><span class="price">55₪</span></td>
            <td><input class="qty" type="number" min="1" value="1"></td>
            <td><button class="add-btn">أضف</button></td>
          </tr>
          <tr data-item="بيتزا تونة">
            <td>بيتزا تونة</td>
            <td>
              <select class="size">
                <option value="55">XL – 55₪</option>
                <option value="40">L – 40₪</option>
                <option value="23">M – 23₪</option>
                <option value="15">S – 15₪</option>
              </select>
            </td>
            <td><span class="price">55₪</span></td>
            <td><input class="qty" type="number" min="1" value="1"></td>
            <td><button class="add-btn">أضف</button></td>
          </tr>
          <tr data-item="بيتزا مارجريتا">
            <td>بيتزا مارجريتا</td>
            <td>
              <select class="size">
                <option value="50">XL – 50₪</option>
                <option value="38">L – 38₪</option>
                <option value="20">M – 20₪</option>
                <option value="14">S – 14₪</option>
              </select>
            </td>
            <td><span class="price">50₪</span></td>
            <td><input class="qty" type="number" min="1" value="1"></td>
            <td><button class="add-btn">أضف</button></td>
          </tr>
          <tr data-item="كلزوني">
            <td>كلزوني</td>
            <td>
              <select class="size">
                <option value="60">XL – 60₪</option>
                <option value="40">L – 40₪</option>
                <option value="32">M – 32₪</option>
                <option value="16">S – 16₪</option>
              </select>
            </td>
            <td><span class="price">60₪</span></td>
            <td><input class="qty" type="number" min="1" value="1"></td>
            <td><button class="add-btn">أضف</button></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <!-- 🍟 أطباق جانبية -->
  <div class="section">
    <h2>🍟 أطباق جانبية</h2>
    <div class="table-wrapper">
      <table id="sides-menu">
        <thead><tr><th>الصنف</th><th>السعر</th><th>الكمية</th><th>أضف</th></tr></thead>
        <tbody>
          <tr data-item="بطاطا صغير" data-price="5">
            <td>بطاطا صغير</td><td>5₪</td>
            <td><input class="qty" type="number" min="1" value="1"></td>
            <td><button class="add-btn">أضف</button></td>
          </tr>
          <tr data-item="زنجر كبير" data-price="25">
            <td>زنجر كبير</td><td>25₪</td>
            <td><input class="qty" type="number" min="1" value="1"></td>
            <td><button class="add-btn">أضف</button></td>
          </tr>
          <tr data-item="بطاطا كبير" data-price="10">
            <td>بطاطا كبير</td><td>10₪</td>
            <td><input class="qty" type="number" min="1" value="1"></td>
            <td><button class="add-btn">أضف</button></td>
          </tr>
          <tr data-item="زنجر صغير" data-price="12">
            <td>زنجر صغير</td><td>12₪</td>
            <td><input class="qty" type="number" min="1" value="1"></td>
            <td><button class="add-btn">أضف</button></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- 🥤 مشروبات -->
  <div class="section">
    <h2>🥤 مشروبات</h2>
    <div class="table-wrapper">
      <table id="drinks-menu">
        <thead><tr><th>المشروب</th><th>السعر</th><th>الكمية</th><th>أضف</th></tr></thead>
        <tbody>
          <tr data-item="كولا 1.25 لتر" data-price="4">
            <td>كولا 1.25 لتر</td><td>4₪</td>
            <td><input class="qty" type="number" min="1" value="1"></td>
            <td><button class="add-btn">أضف</button></td>
          </tr>
          <tr data-item="كولا 2 لتر" data-price="6">
            <td>كولا 2 لتر</td><td>6₪</td>
            <td><input class="qty" type="number" min="1" value="1"></td>
            <td><button class="add-btn">أضف</button></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- 🛒 السلة الجانبية -->
  <div id="cart-manager" style="position:fixed;bottom:10px;left:10px;width:320px;background:#fff;padding:12px;border:1px solid #ccc;border-radius:6px;z-index:20">
    <input id="user-name" placeholder="اسمك (اختياري)" />
    <input id="user-address" placeholder="العنوان/هاتف (اختياري)" />
    <button id="start-btn">☑ بدء الطلب</button>
    <div id="cart-controls" style="display:none">
      <button id="add-cart">➕ سلة جديدة</button>
      <input id="cart-name" placeholder="اسم السلة" />
      <button id="save-cart">💾 حفظ</button>
      <select id="load-cart"></select>
      <button id="delete-cart">🗑️ حذف</button>
      <div id="cart-tabs"></div>
    </div>
  </div>
<script>
  let userName = '', userAddr = '', key = '', carts = {}, cur = null;
  const nameIn = document.getElementById('user-name'),
        addrIn = document.getElementById('user-address'),
        startBtn = document.getElementById('start-btn'),
        controls = document.getElementById('cart-controls'),
        addBtn = document.getElementById('add-cart'),
        cartNameIn = document.getElementById('cart-name'),
        saveBtn = document.getElementById('save-cart'),
        loadSel = document.getElementById('load-cart'),
        delBtn = document.getElementById('delete-cart'),
        tabsDiv = document.getElementById('cart-tabs'),
        mgr = document.getElementById('cart-manager');

  function loadData(){
    userName = localStorage.getItem('userName')||'';
    userAddr = localStorage.getItem('userAddr')||'';
    key = 'orders_' + (userName||'guest');
    const d = JSON.parse(localStorage.getItem(key)||'{}');
    carts = d.carts || {'1':[]}; cur = d.cur || '1';
  }

  function saveData(){
    localStorage.setItem('userName', userName);
    localStorage.setItem('userAddr', userAddr);
    localStorage.setItem(key, JSON.stringify({ carts, cur }));
  }

  function buildTabs(){
    tabsDiv.innerHTML = ''; loadSel.innerHTML = '';
    for(const name in carts){
      const b = document.createElement('button');
      b.textContent = name; b.dataset.cart = name;
      b.onclick = ()=>selectCart(name);
      tabsDiv.appendChild(b);
      const o = document.createElement('option');
      o.value = name; o.textContent = name; loadSel.append(o);
    }
    selectCart(cur);
  }

  function selectCart(name){
    cur = name; saveData();
    tabsDiv.querySelectorAll('button')
      .forEach(b=>b.classList.toggle('active', b.dataset.cart===name));
    document.querySelectorAll('.cart-tab').forEach(e=>e.remove());
    const d = document.createElement('div');
    d.id = 'cart-'+name; d.className='cart-tab active';
    d.innerHTML = `
      <strong>🧺 سلة: ${name}</strong>
      <ul id="items-${name}"></ul>
      <div><strong>📦 الإجمالي:</strong> <span id="total-${name}">0₪</span></div>
      <button id="clear-${name}">🚮 تفريغ</button><br>
      <a id="wa-${name}" class="btn whatsapp" href="#" target="_blank">واتساب</a>
      <a id="card-${name}" class="btn card" href="#" target="_blank">بطاقة</a>`;
    mgr.appendChild(d);
    d.querySelector(`#clear-${name}`).onclick = ()=>{
      carts[name]=[]; saveData(); renderCart(name);
    };
    renderCart(name);
  }

  function renderCart(name){
    const ul = document.getElementById('items-'+name),
          ttl = document.getElementById('total-'+name),
          wa  = document.getElementById('wa-'+name),
          cd  = document.getElementById('card-'+name);
    ul.innerHTML = carts[name].length === 0
      ? '<li style="text-align:center;color:#999">🧺 السلة فارغة حاليًا</li>'
      : '';

    let sum = 0;
    let msg = `مرحبًا ${userName||'ضيف'}%0A`;
    if(userAddr) msg += `📍 ${userAddr}%0A`;
    msg += `🧺 الطلب:%0A`;

    const sections = { pizza: [], sides: [], drinks: [], other: [] };

    carts[name].forEach((it, i) => {
      const lt = it.price * it.qty;
      sum += lt;

      const li = document.createElement('li');
      li.innerHTML = `${it.item} (${it.qty}) – ${lt}₪ <button class="remove-item" data-i="${i}">❌</button>`;
      ul.appendChild(li);
      li.querySelector('.remove-item').onclick = () => {
        carts[name].splice(i, 1); saveData(); renderCart(name);
      };

      const label = it.item.toLowerCase();
      if(label.includes('بيتزا')) sections.pizza.push(`🍕 ${it.item} ×${it.qty} – ${lt}₪`);
      else if(label.includes('بطاطا') || label.includes('زنجر')) sections.sides.push(`🍟 ${it.item} ×${it.qty} – ${lt}₪`);
      else if(label.includes('كولا') || label.includes('عصير')) sections.drinks.push(`🥤 ${it.item} ×${it.qty} – ${lt}₪`);
      else sections.other.push(`• ${it.item} ×${it.qty} – ${lt}₪`);
    });

    if(sections.pizza.length) msg += sections.pizza.join('%0A') + '%0A';
    if(sections.sides.length) msg += sections.sides.join('%0A') + '%0A';
    if(sections.drinks.length) msg += sections.drinks.join('%0A') + '%0A';
    if(sections.other.length) msg += sections.other.join('%0A') + '%0A';

    msg += `📦 الإجمالي: ${sum}₪`;

    ttl.textContent = sum + '₪';
    wa.href = 'https://wa.me/972569788731?text=' + encodeURIComponent(msg);
    cd.href = 'https://your-gateway.com/pay?cart=' + encodeURIComponent(msg);
    loadSel.value = name;
  }

  addBtn.onclick = ()=>{
    let nm = cartNameIn.value.trim()||prompt('اسم السلة الجديدة:');
    if(!nm||carts[nm]) return alert('فارغ أو موجود');
    carts[nm]=[]; saveData(); buildTabs();
  };
  saveBtn.onclick = ()=>{
    let nm = cartNameIn.value.trim();
    if(!nm) return alert('سجّل اسماً');
    carts[nm] = carts[cur]||[]; delete carts[cur];
    cur=nm; saveData(); buildTabs();
  };
  loadSel.onchange = ()=>selectCart(loadSel.value);
  delBtn.onclick = ()=>{
    delete carts[loadSel.value]; cur = Object.keys(carts)[0]||null;
    saveData(); buildTabs();
  };

  function addToCart(item, price, qty){
    carts[cur] = carts[cur]||[];
    carts[cur].push({ item, price, qty });
    saveData(); renderCart(cur);
  }

  document.querySelectorAll('#pizza-menu, #sides-menu, #drinks-menu')
    .forEach(tbl=>{
      tbl.addEventListener('change', e=>{
        if(e.target.classList.contains('size')){
          const r = e.target.closest('tr');
          r.querySelector('.price').textContent = e.target.value+'₪';
        }
      });
      tbl.addEventListener('click', e=>{
        if(!e.target.classList.contains('add-btn')) return;
        const row = e.target.closest('tr'),
              qty = +row.querySelector('.qty').value,
              sel = row.querySelector('.size'),
              price = sel ? +sel.value : +row.dataset.price,
              item = sel ? `${row.dataset.item} (${sel.selectedOptions[0].text})` : row.dataset.item;
        addToCart(item, price, qty);
      });
    });

  loadData();

  startBtn.onclick = ()=>{
    userName = nameIn.value.trim();
    userAddr = addrIn.value.trim();
    if(!userName && !confirm('المتابعة كـ “ضيف”؟')) return;
    saveData(); nameIn.style.display = addrIn.style.display = startBtn.style.display = 'none';
    controls.style.display = 'block'; buildTabs();
  };
</script>

<div class="footer">
  بلعين – شارع صفا – رام الله<br>
  © 2025 PIZZA HOT — جميع الحقوق محفوظة.
</div>

</body>
</html>
