<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>๐ ูุชุฌุฑ PIZZA HOT</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box }
    body {
      margin: 0;
      font-family: 'Tajawal', sans-serif;
      background: #f4f6f7;
      color: #2c3e50;
      line-height: 1.6;
    }
    header {
      position: fixed;
      top: 0;
      width: 100%;
      background: #2c3e50;
      color: #fff;
      text-align: center;
      padding: 12px;
      z-index: 10;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    header a {
      margin: 0 10px;
      color: #fff;
      text-decoration: none;
      font-weight: 700;
      font-size: 1.1rem;
    }
    .overlay {
      padding: 90px 10px 160px;
      background: #ffffff;
      min-height: 100vh;
    }
    h1 {
      text-align: center;
      color: #34495e;
      margin: 20px 0;
      font-size: clamp(1.8rem, 5vw, 2.5rem);
      font-weight: 900;
    }
    .section {
      max-width: 900px;
      margin: 30px auto;
      padding: 0 10px;
    }
    h2 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 12px;
      font-size: 1.4rem;
    }
    .table-wrapper {
      overflow-x: auto;
      border: 1px solid #dfe6e9;
      border-radius: 6px;
      background: #fff;
      margin-bottom: 20px;
      box-shadow: 0 0 8px rgba(0,0,0,0.05);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 1rem;
    }
    th, td {
      text-align: center;
      border: 1px solid #dfe6e9;
      padding: 10px;
    }
    th {
      background: #2c3e50;
      color: #fff;
    }
    tr:nth-child(even) td {
      background: #f4f6f7;
    }
    select.size, input.qty {
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 4px;
      text-align: center;
      font-size: 0.95rem;
    }
    input.qty {
      width: 60px;
    }
    button.add-btn {
      background: #34495e;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      font-weight: 700;
      cursor: pointer;
      color: #fff;
    }
    button.add-btn:hover {
      background: #2c3e50;
    }
    .price {
      color: #c0392b;
      font-weight: bold;
    }
    .note-box {
      background: #fef9e7;
      border: 1px solid #f9e79f;
      padding: 12px;
      margin: 20px auto;
      max-width: 700px;
      border-radius: 6px;
      font-size: 1rem;
      color: #7d6608;
    }
    .copy-box {
      background: #f0f0f0;
      border: 1px dashed #999;
      padding: 10px;
      font-family: monospace;
      font-size: 1rem;
      text-align: center;
      user-select: all;
      margin-top: 8px;
      border-radius: 4px;
    }
    #auto-discount-alert {
      display: none;
      background: #fff3cd;
      border: 1px solid #ffeeba;
      padding: 10px;
      border-radius: 6px;
      color: #856404;
      margin: 20px auto;
      text-align: center;
      max-width: 700px;
    }
    @media (max-width: 600px) {
      .table-wrapper {
        overflow-x: scroll;
      }
      #cart-manager {
        width: 95vw !important;
        left: 2.5vw !important;
        bottom: 10px !important;
        max-height: 80vh;
        overflow-y: auto;
        overflow-x: auto;
      }
    }
  </style>
</head>
<body>
<header>
  <a href="index.html">๐ ุงูุฑุฆูุณูุฉ</a>
  <a href="promo_offer.html">๐ฅ ุงูุนุฑุถ</a>
  <a href="store.html">๐ ุงููุชุฌุฑ</a>
</header>
<div class="overlay">
  <h1>๐ ูุชุฌุฑ PIZZA HOT</h1>
  <div class="note-box">
    โ๏ธ ุฅุฐุง ูุงุฌูุชู ูุดููุฉ ูู ุนุฑุถ ุงูุตูุญุฉ ุฃู ุชูุนูู ุงูุฎุตูุ ุงุณุชุฎุฏู ุงูุฑุงุจุท ุงูุจุฏูู:
    <br>
    ๐ <a href="https://solvanix.github.io/Product_Store/Pizza_Hot/store.backup.html" target="_blank">store.backup.html</a>
    <br><br>
    โ ููุฏ ุงูุฎุตู ุงูุฎุงุต ุจุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ:
    <div class="copy-box">HOT10</div>
  </div>
  <div class="note-box">
    ๐๏ธ ุงูููุฏ ุงููููู: <span id="daily-coupon-box">โ</span><br>
    ููููู ูุณุฎู ููุถุนู ูู ุงูุญูู ุงูุฑุฆูุณู ุฃู ุงูุซุงููู ููุญุตูู ุนูู ุฎุตู ูุงูู ุฃู ุฌุฒุฆู.
  </div>
  <div id="auto-discount-alert">
    ๐ ุชู ุชูุนูู ุฎุตู ุชููุงุฆู ุงูููู โ ูุง ุญุงุฌุฉ ูุฅุฏุฎุงู ููุฏ ูู ุงูุญูู ุงูุฑุฆูุณู.
  </div>
<div class="section">
  <h2>๐ ูุงุฆูุฉ ุงูุจูุชุฒุง</h2>
  <div class="table-wrapper">
    <table id="pizza-menu">
      <thead>
        <tr>
          <th>ุงูููุน</th>
          <th>ุงูุญุฌู</th>
          <th>ุงูุณุนุฑ</th>
          <th>ุงููููุฉ</th>
          <th>ุงูุฅุฌูุงูู</th>
          <th>ุฃุถู</th>
        </tr>
      </thead>
      <tbody>
        <tr data-item="ุจูุชุฒุง ุฏุฌุงุฌ"><td>ุจูุชุฒุง ุฏุฌุงุฌ</td><td><select class="size"><option value="65">XL โ 65โช</option><option value="45">L โ 45โช</option><option value="33">M โ 33โช</option><option value="17">S โ 17โช</option></select></td><td><span class="price">65โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">65โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ุจูุชุฒุง ุฎุถุงุฑ"><td>ุจูุชุฒุง ุฎุถุงุฑ</td><td><select class="size"><option value="50">XL โ 50โช</option><option value="38">L โ 38โช</option><option value="20">M โ 20โช</option><option value="14">S โ 14โช</option></select></td><td><span class="price">50โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">50โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ุจูุชุฒุง ุณูุงูู"><td>ุจูุชุฒุง ุณูุงูู</td><td><select class="size"><option value="55">XL โ 55โช</option><option value="40">L โ 40โช</option><option value="23">M โ 23โช</option><option value="15">S โ 15โช</option></select></td><td><span class="price">55โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">55โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ุจูุชุฒุง ููุงูู"><td>ุจูุชุฒุง ููุงูู</td><td><select class="size"><option value="55">XL โ 55โช</option><option value="40">L โ 40โช</option><option value="23">M โ 23โช</option><option value="15">S โ 15โช</option></select></td><td><span class="price">55โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">55โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ุจูุชุฒุง ุชููุฉ"><td>ุจูุชุฒุง ุชููุฉ</td><td><select class="size"><option value="55">XL โ 55โช</option><option value="40">L โ 40โช</option><option value="23">M โ 23โช</option><option value="15">S โ 15โช</option></select></td><td><span class="price">55โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">55โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ุจูุชุฒุง ูุงุฑุฌุฑูุชุง"><td>ุจูุชุฒุง ูุงุฑุฌุฑูุชุง</td><td><select class="size"><option value="50">XL โ 50โช</option><option value="38">L โ 38โช</option><option value="20">M โ 20โช</option><option value="14">S โ 14โช</option></select></td><td><span class="price">50โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">50โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ููุฒููู"><td>ููุฒููู</td><td><select class="size"><option value="60">XL โ 60โช</option><option value="40">L โ 40โช</option><option value="32">M โ 32โช</option><option value="16">S โ 16โช</option></select></td><td><span class="price">60โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">60โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
      </tbody>
    </table>
  </div>
</div>
<div class="section">
  <h2>๐ ุฃุทุจุงู ุฌุงูุจูุฉ</h2>
  <div class="table-wrapper">
    <table id="sides-menu">
      <thead>
        <tr>
          <th>ุงูุตูู</th>
          <th>ุงูุณุนุฑ</th>
          <th>ุงููููุฉ</th>
          <th>ุงูุฅุฌูุงูู</th>
          <th>ุฃุถู</th>
        </tr>
      </thead>
      <tbody>
        <tr data-item="ุจุทุงุทุง ุตุบูุฑ" data-price="5"><td>ุจุทุงุทุง ุตุบูุฑ</td><td><span class="price">5โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">5โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ุจุทุงุทุง ูุจูุฑ" data-price="10"><td>ุจุทุงุทุง ูุจูุฑ</td><td><span class="price">10โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">10โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ุฒูุฌุฑ ุตุบูุฑ" data-price="12"><td>ุฒูุฌุฑ ุตุบูุฑ</td><td><span class="price">12โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">12โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ุฒูุฌุฑ ูุจูุฑ" data-price="25"><td>ุฒูุฌุฑ ูุจูุฑ</td><td><span class="price">25โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">25โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ุฃุฌูุญุฉ ุฌูุงู ุตุบูุฑ" data-price="12"><td>ุฃุฌูุญุฉ ุฌูุงู ุตุบูุฑ</td><td><span class="price">12โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">12โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ุฃุฌูุญุฉ ุฏุฌุงุฌ ูุจูุฑ" data-price="24"><td>ุฃุฌูุญุฉ ุฏุฌุงุฌ ูุจูุฑ</td><td><span class="price">24โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">24โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
      </tbody>
    </table>
  </div>
</div>
<div class="section">
  <h2>๐ฅค ูุดุฑูุจุงุช</h2>
  <div class="table-wrapper">
    <table id="drinks-menu">
      <thead>
        <tr>
          <th>ุงููุดุฑูุจ</th>
          <th>ุงูุณุนุฑ</th>
          <th>ุงููููุฉ</th>
          <th>ุงูุฅุฌูุงูู</th>
          <th>ุฃุถู</th>
        </tr>
      </thead>
      <tbody>
        <tr data-item="ูููุง 1.25 ูุชุฑ" data-price="4"><td>ูููุง 1.25 ูุชุฑ</td><td><span class="price">4โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">4โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ูููุง 2 ูุชุฑ" data-price="6"><td>ูููุง 2 ูุชุฑ</td><td><span class="price">6โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">6โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ุนุตูุฑ ูุงูุฌู" data-price="5"><td>ุนุตูุฑ ูุงูุฌู</td><td><span class="price">5โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">5โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ููุงู ูุนุฏููุฉ" data-price="3"><td>ููุงู ูุนุฏููุฉ</td><td><span class="price">3โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">3โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
      </tbody>
    </table>
  </div>
</div>
<div class="section">
  <h2>๐ฅค ูุดุฑูุจุงุช</h2>
  <div class="table-wrapper">
    <table id="drinks-menu">
      <thead>
        <tr>
          <th>ุงููุดุฑูุจ</th>
          <th>ุงูุณุนุฑ</th>
          <th>ุงููููุฉ</th>
          <th>ุงูุฅุฌูุงูู</th>
          <th>ุฃุถู</th>
        </tr>
      </thead>
      <tbody>
        <tr data-item="ูููุง 1.25 ูุชุฑ" data-price="4"><td>ูููุง 1.25 ูุชุฑ</td><td><span class="price">4โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">4โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ูููุง 2 ูุชุฑ" data-price="6"><td>ูููุง 2 ูุชุฑ</td><td><span class="price">6โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">6โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ุนุตูุฑ ูุงูุฌู" data-price="5"><td>ุนุตูุฑ ูุงูุฌู</td><td><span class="price">5โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">5โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
        <tr data-item="ููุงู ูุนุฏููุฉ" data-price="3"><td>ููุงู ูุนุฏููุฉ</td><td><span class="price">3โช</span></td><td><input class="qty" type="number" min="1" value="1"></td><td class="total-cell">3โช</td><td><button class="add-btn">ุฃุถู</button></td></tr>
      </tbody>
    </table>
  </div>
</div>
<div id="cart-manager">
  <input id="user-name" placeholder="๐ค ุงุณูู (ุงุฎุชูุงุฑู)" />
  <input id="user-address" placeholder="๐ ุงูุนููุงู/ูุงุชูู (ุงุฎุชูุงุฑู)" />
  <input id="user-coupon" placeholder="๐๏ธ ููุฏ ุงูุฎุตู ุงูุฑุฆูุณู (FB10 ุฃู ุงูููุฏ ุงููููู)" />
  <input id="secondary-coupon" placeholder="๐๏ธ ููุฏ ุฅุถุงูู (ููุงุกุ ุนุถููุฉุ ุฅูุฎ)" />
  <button id="start-btn">โ ูุนุงููุฉ ุงูุทูุจ</button>
  <button id="clear-cart">๐๏ธ ุชูุฑูุบ ุงูุณูุฉ</button>
  <button id="send-wa">๐ค ุฅุฑุณุงู ุงูุทูุจ</button>
  <div id="cart-preview"></div>
</div>
<script src="cart.js"></script>
<script src="discountEngine.js"></script>
<script src="discountRules.js"></script>
<script src="messageBuilder.js"></script>
<script src="dailyCoupon.js"></script>

<script>
function hasAutoDiscount() {
  const today = new Date();
  const isFriday = today.getDay() === 5;
  const isHoliday = localStorage.getItem("isHoliday") === "true";
  return isFriday || isHoliday;
}

window.onload = function(){
  CartCore.init(localStorage.getItem("userName") || "ุถูู");
  const stored = JSON.parse(localStorage.getItem("dailyCoupon") || "{}");
  document.getElementById("daily-coupon-box").textContent = stored.code || "โ";

  if (hasAutoDiscount()) {
    const mainInput = document.getElementById("user-coupon");
    mainInput.disabled = true;
    mainInput.placeholder = "๐ ุฎุตู ุชููุงุฆู ููุนูู โ ูุง ูููู ุฅุฏุฎุงู ููุฏ";
    mainInput.style.background = "#eee";
    mainInput.style.cursor = "not-allowed";
    document.getElementById("auto-discount-alert").style.display = "block";
  }

  document.querySelectorAll('.size').forEach(sel => sel.addEventListener('change', updateTotal));
  document.querySelectorAll('.qty').forEach(qty => qty.addEventListener('input', updateTotal));
  document.getElementById("secondary-coupon").addEventListener("input", renderCart);

  function updateTotal() {
    const r = this.closest('tr');
    const sel = r.querySelector('.size');
    const qty = +r.querySelector('.qty').value;
    const price = sel ? +sel.value : +r.dataset.price;
    r.querySelector('.price').textContent = price + 'โช';
    r.querySelector('.total-cell').textContent = (price * qty) + 'โช';
  }

  document.querySelectorAll('.add-btn').forEach(btn => {
    btn.addEventListener('click', e => {
      const row = e.target.closest('tr'),
            qty = +row.querySelector('.qty').value,
            sel = row.querySelector('.size'),
            price = sel ? +sel.value : +row.dataset.price,
            item = sel ? `${row.dataset.item} (${sel.selectedOptions[0].text})` : row.dataset.item;
      CartCore.add(item, price, qty);
      CartCore.save();
      renderCart();
    });
  });

  document.getElementById("start-btn").onclick = renderCart;
  document.getElementById("clear-cart").onclick = () => {
    CartCore.clear();
    renderCart();
  };

  document.getElementById("send-wa").onclick = () => {
    const cartData = CartCore.getCurrentCart();
    if (cartData.length === 0) {
      alert("โ๏ธ ูุง ูููู ุฅุฑุณุงู ุทูุจ ูุงุฑุบ.");
      return;
    }
    const rawTotal = CartCore.total();
    const userName = document.getElementById("user-name").value.trim() || "ุถูู";
    const userAddr = document.getElementById("user-address").value.trim();
    const coupon1 = hasAutoDiscount() ? "" : document.getElementById("user-coupon").value.trim();
    const coupon2 = document.getElementById("secondary-coupon").value.trim();
    localStorage.setItem("userCoupon", coupon1);
    const { total, applied, breakdown } = DiscountEngine.apply(rawTotal, cartData, userName, coupon1, coupon2);
    let msg = MessageBuilder.build(cartData, userName, userAddr, total, applied, breakdown, rawTotal);
    document.getElementById("cart-preview").textContent = msg;
    window.open("https://wa.me/972569788731?text=" + encodeURIComponent(msg), "_blank");
  };

  function renderCart() {
    const cartData = CartCore.getCurrentCart();
    const rawTotal = CartCore.total();
    const coupon1 = hasAutoDiscount() ? "" : document.getElementById("user-coupon").value.trim();
    const coupon2 = document.getElementById("secondary-coupon").value.trim();
    const { total, applied, breakdown } = DiscountEngine.apply(rawTotal, cartData, "ูุนุงููุฉ", coupon1, coupon2);

    let msg = cartData.map(i => `โข ${i.item} ร ${i.qty} = ${i.price * i.qty}โช`).join("\n");
    msg += `\n๐ฆ ูุจู ุงูุฎุตู: ${rawTotal}โช`;
    msg += `\n๐ฆ ุจุนุฏ ุงูุฎุตู: ${total}โช`;
    if (applied.length) {
      msg += `\n๐ธ ุฎุตููุงุช ููุนููุฉ: ${applied.join(", ")}`;
      msg += `\n๐ ุชูุงุตูู:\n${breakdown.join("\n")}`;
    }
    document.getElementById("cart-preview").textContent = msg;
  }
};
</script>
<div class="footer">
  ๐ ุจูุนูู โ ุดุงุฑุน ุตูุง โ ุฑุงู ุงููู<br>
  ยฉ 2025 PIZZA HOT โ ุฌููุน ุงูุญููู ูุญููุธุฉ.
</div>
</body>
</html>
